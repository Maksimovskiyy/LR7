<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ title }}</title>
</head>
<body>
    <header>
        <h1>ЛАБОРАТОРНАЯ РАБОТА №6</h1>
    </header>

    <main>
            <p>Привет, {{ user.name }}!</p>
            <p>1.	Установить пакет flask_login
2.	Создать модель для работы с пользователями User на основе базового класса UserMixin (from flask_login import UserMixin) с полями id, email, password, name.
3.	Создать endpoint для перехода на корневую страницу GET /. Эндпоинт рендерит и отдает страницу index.html. Логика работы эндпоинта:
1.	Для авторизованных пользователей при переходе на корневую страницу вывести название и описание лабораторной работы, а также показать кнопку «Выход» нажатие на которую отправит GET запрос на на эндпоинт /logout.
2.	Для неавторизованных пользователей переход на корневую страницу должен перенаправлять на форму страницу входа.
4.	Создать endpoint для перехода на страницу входа GET /login. Эндпоинт рендерит и отдает страницу login.html. При переходе на  страницу входа вывести форму для ввода email и password с кнопкой «Вход». Логика взаимодействия пользователя с формой:
1.	Поля email и password обязательны для заполнения
2.	После того как пользователь заполнил все обязательные поля и нажал на кнопку «Вход» отправляется POST запрос на эндпоинт /login с данными, которые введены на форме
5.	Создать endpoint для осуществления авторизации POST /login. Обработка запроса:
1.	Получаем данные, которые пользователь ввел в форму email и password
2.	С помощью модели User находим пользователя по указанному email и если пользователя с таким email нет в базе данных, тогда отдаем ошибку о том, что пользователь не найден и выводим ее на страницу
3.	Если пользователь с указанным email найден, тогда следующим этапом проверяем указанный пользователем пароль с тем, который был записан за пользователем в базе данных и в случае если пароли не совпадают вывести ошибку об этом на страницу
4.	Если все данные введены корректно и все проверки пройдены, тогда перенаправляем пользователя на корневую страницу index.html
6.	Создать endpoint для перехода на страницу регистрации GET /signup. Эндпоинт рендерит и отдает страницу signup.html. При переходе на  страницу регистрации вывести форму для ввода name, email и password с кнопкой «Зарегистрироваться». Логика взаимодействия пользователя с формой:
1.	Поля формы обязательны для заполнения
2.	После того как пользователь заполнил все обязательные поля и нажал на кнопку «Зарегистрироваться» отправляется POST запрос на эндпоинт /signup с данными, которые введены на форме
7.	Создать endpoint для осуществления авторизации POST /signup. Обработка запроса:
1.	Получаем данные, которые пользователь ввел в форму name, email и password
2.	С помощью модели User ищем пользователя по указанному email
3.	Если пользователь с указанным email уже существует, тогда выводим ошибку на страницу о том, что пользователь уже существует
4.	Если не существует пользователя с указанным email, тогда регистрируем пользователя и перенаправляем на страницу входа login.html
8.	Создать endpoint для осуществления авторизации GET /logout. Обработка запроса:
1.	Завершается сессия текущего авторизованного пользователя
2.	Неавторизованный пользователь перенаправляется на страницу входа
</p>
            <a href="{{ url_for('users.logout') }}">Выход</a>
    </main>
</body>
</html>